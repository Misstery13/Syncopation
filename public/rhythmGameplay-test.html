                <!DOCTYPE html>
                <html lang="es">

                <head>
                    <meta charset="UTF-8" />
                    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                    <meta http-equiv="Content-Security-Policy"
                        content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src * 'unsafe-inline'; img-src * data: blob: 'unsafe-inline'; frame-src *; style-src * 'unsafe-inline';">
                    <title>Rhythm Game Prototype</title>
                    <style>
                        body {
                            background-color: #0b0b0b;
                            color: white;
                            margin: 0;
                            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
                        }

                        .rhythm-container {
                            padding: 20px;
                            max-width: 1000px;
                            margin: 0 auto;
                            box-sizing: border-box;
                        }

                        .stats {
                            display: flex;
                            justify-content: space-around;
                            margin-bottom: 12px;
                            gap: 12px;
                        }

                        .stat-item {
                            flex: 1 1 0;
                            text-align: center;
                            background: rgba(255, 255, 255, 0.02);
                            padding: 14px 8px;
                            border-radius: 8px;
                        }

                        .stat-item .label {
                            display: block;
                            font-size: 14px;
                            color: #bbb;
                        }

                        .stat-item .value {
                            display: block;
                            font-size: 28px;
                            font-weight: 700;
                            color: #00ff7f;
                        }

                        /* Game area container where Phaser canvas will be mounted */
                        .game-area {
                            position: relative;
                            width: 900px;
                            height: 900px;
                            margin: 12px auto 24px auto;
                            background: #050505;
                            border-radius: 6px;
                            overflow: hidden;
                            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
                        }

                        #target-indicator {
                            width: 100px;
                            height: 100px;
                            background-color: transparent;
                            margin: 20px auto;
                            border: 5px solid #00ff7f;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 14px;
                            color: #ddd;
                            background: rgba(255, 255, 255, 0.03);
                            padding: 6px 10px;
                            border-radius: 6px;
                            pointer-events: none;
                        }

                        #feedback-log {
                            height: 80px;
                            overflow-y: auto;
                            text-align: center;
                            margin-top: 6px;
                        }

                        .perfect {
                            color: #ffd700;
                        }

                        .ok {
                            color: #ffa500;
                        }

                        .miss {
                            color: #ff4d4d;
                        }
                    </style>
                </head>

                <body style="background-color: black; color: white; margin: 0;">

                    <div id="app-root"></div>
                    <!-- Phaser container: keep it in the DOM so startPhaser can mount the canvas here -->
                    <div id="phaser-root" style="width:800px;height:600px;margin:20px auto;display:block;box-sizing:border-box;"></div>

                    <script type="module">
                        console.log('Test page script starting...');
                        import { initRhythmScreen } from "../src/scenes/CARLOS/gameplayController.ts";
                        import { initPhaserForTest } from "../src/scenes/CARLOS/testInit.ts";

                        window.addEventListener("DOMContentLoaded", () => {
                            console.log('DOMContentLoaded event fired');

                            // 1. Inicia la pantalla del juego de ritmo
                            try {
                                initRhythmScreen();
                                console.log('initRhythmScreen called successfully');
                            } catch (e) {
                                console.error('Error calling initRhythmScreen:', e);
                            }

                            // 2. Inicia Phaser para los sprites
                            try {
                                initPhaserForTest();
                                console.log('initPhaserForTest called successfully');
                            } catch (e) {
                                console.error('Error calling initPhaserForTest:', e);
                            }
                        });

                        // Simular navegación (si quieres agregarla)
                        document.addEventListener('navigateToMenu', () => {
                            document.getElementById('app-root').innerHTML = '<h1>Volviste al menú principal.</h1>';
                        });
                    </script>

                </body>

                </html>